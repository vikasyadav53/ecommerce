//----- Ecommerce_User_details_entities_diagram --------------------

Table user_details {
  user_id int [pk, increment] // auto-increment
  first_name varchar [not null]
  last_name varchar [not null]
  gender varchar [not null]
  billing_address_id varchar [not null, ref: > address_details.address_id]
  shipping_address_id varchar [not null, ref: > address_details.address_id]
  phone int [not null]
  email_id varchar [not null]
  age int [not null]
  contact_address_id varchar [not null, ref: > address_details.address_id]
  created_at timestamp
  updated_at timestamp
}


Table address_details {
  address_id int [pk, increment]
  address_line1 varchar [not null]
  address_line2 varchar 
  street varchar 
  city varchar [not null]
  state varchar [not null]
  country_code int [not null, ref: > countries.code]
  zip_code int [not null]
}

Table countries {
  code int [pk]
  name varchar
  continent_name varchar
 }
 
 Table user_login_details {
   user_id int [not null, ref: > user_details.user_id]
   user_login_id int [pk, increment]
   user_pwd varchar [not null]
   is_active boolean [default: '1']
   is_blocked boolean [default: '0']
   created_at timestamp
   updated_at timestamp
   assigned_roles varchar [not null]
   
 }
 
 Table session_history {
   session_id varchar [not null]
   created_at timestamp
   updated_at timestamp
   valid_at timestamp
   user_login_id int [not null, ref: > user_login_details.user_login_id]
   user_id int [not null, ref: > user_details.user_id]
   history_id int [pk, increment]
 }







//----- Ecommerce_Product_details_entities_diagram --------------------

Table product_category {
  category_id int [pk, increment]
  category_name varchar [not null]
  is_active boolean [default: '1']
  created_at timestamp
  updated_at timestamp
}

Table product_subcategory {
  subcategory_id int [pk, increment]
  subcategory_name varchar [not null]
  is_active boolean [default: '1']
  created_at timestamp
  updated_at timestamp
}

Table product_subcategory_relation {
  id int [not null]
  product_parent_subcategory int [not null, ref: > product_subcategory.subcategory_id]
  product_child_subcategory int [not null, ref: > product_subcategory.subcategory_id]
  is_active boolean [default: '1']
}

Table product_category_relation {
  id int [not null]
  product_category_id int [not null, ref: > product_category.category_id]
  product_subcategory_id int [not null, ref: > product_subcategory.subcategory_id]
  is_active boolean [default: '1']
}

Table product_details {
  product_id int [pk, increment]
  product_name varchar [not null]
  description varchar 
  summary varchar
  subcategory_list int [not null, ref: > product_subcategory.subcategory_id]
  image1_url varchar [not null]
  image2_url varchar [not null]
  image3_url varchar [not null]
  selling_price double [not null]
  applicable_offers int [not null]
  applicable_coupons int [not null]
  is_active boolean [default: '1']
}

Table product_catalog_details {
  pc_id int [pk, increment]
  product_id int [not null, ref: > product_details.product_id]
  subcategory_list int [not null, ref: > product_subcategory.subcategory_id]
  seller_id int [not null]
  is_active boolean [default: '1']
  applicable_coupons int [not null]
  applicable_offers int [not null]
  created_at timestamp
  updated_at timestamp
}

Table category_feature_details {
  id int [pk, increment]
  subcategory_id int [not null, ref: > product_subcategory.subcategory_id]
  feature_category varchar [not null] // feature table names e.g. featurecategorybysize
  is_active boolean [default: '1']
}

Table featurecategory_size {
  id int [pk, increment]
  width double 
  height double 
  length double 
  color varchar 
  weigth double 
  pc_id int [not null, ref: > product_catalog_details.pc_id]
  created_at timestamp
  updated_at timestamp
}




//----- Ecommerce_Bill_details_entities_diagram --------------------

Table bill_product_details {
  product_id int [not null]
  pc_id int [not null]
  selling_price double [not null]
  applicable_offers int [not null]
  applicable_coupons int [not null]
  country_code varchar [not null]
  taxes varchar [not null]
  is_valid boolean [default: '1']
  is_active boolean [default: '1']
  bill_prod_id int [pk, increment]
}

Table bill_user_details {
  bill_user_id int [pk, increment]
  user_id int [pk, increment]
  saved_points int [default: 0]
  applicable_coupons int [not null]
  applicable_offers int [not null]
  primary_bill_address_id int [not null]
  primary_ship_address_id int [not null]
}

Table invoice_details {
  invoice_id int [pk, increment]
  created_at timestamp
  updated_at timestamp
  product_id int [not null]
  pc_id int [not null]
  bill_user_id int [not null, ref: > bill_user_details.bill_user_id]
  bill_prod_id int [not null, ref: > bill_product_details.bill_prod_id]
  applied_offer int [not null]
  applied_coupon int [not null]
  selling_price int [not null]
  applied_taxes double [default: 0.0]
  final_price double [not null]
  user_id int [not null]
  mobile_no varchar [not null]
  email_id varchar
  shipping_address_id int [not null]
  billing_address_id int [not null]
  payment_mode int [not null]
  payment_status varchar [not null]
  payment_done_at timestamp [not null]
  order_id int [not null]
  order_status varchar [not null]
  order_placed_date timestamp [not null]  
}




//----- Ecommerce_Order_details_entities_diagram --------------------

Table Order {
  order_id int [pk, increment]
  user_id int [not null]
  created_at timestamp
  updated_at timestamp
  bill_address_id int [not null]
  ship_address_id int [not null]
  delivery_date timestamp
  delivery_status timestamp
  order_status varchar [not null]
  order_history_id int [not null]
  order_history_status varchar [not null]
  billing_id int [not null]
}

Table order_product_details {
  order_prod_id int [pk, increment]
  product_id int [not null]
  pc_id int [not null]
  order_id int [not null, ref: > Order.order_id]
  order_prod_status varchar [not null]
  order_prod_history_id int [not null] //must be parent id
  order_prod_history_status varchar [not null]
}

Table order_bill_details {
  payment_mode int [not null]
  payment_status varchar [not null]
  billing_id int [pk, increment]
  order_id int [not null, ref: > Order.order_id]
  order_prod_id int [not null, ref: > order_product_details.order_prod_id]
  selling_price double [not null]
  applied_offer int [not null]
  applied_coupons int [not null]
  saved_points int [not null]
  final_price double [not null]
  billing_status varchar [not null]
}